<ion-header class="main-header shadow">
	<ion-toolbar>
		<ion-title class="ion-padding-start">Edit Prescription</ion-title>
	</ion-toolbar>
</ion-header>
<ion-progress-bar color="tertiary" type="indeterminate" *ngIf="Progress"></ion-progress-bar>
<ion-content class="ion-padding">

	<form class="footerform" [formGroup]="editPrescription" (ngSubmit)="editPresc_detail(editPrescription.value)">
		<ion-card button (click)="addImg()" *ngIf="edit_all_image.length==0" class="ion-no-margin ion-margin-top ion-margin-bottom">
			<ion-card-content class="ion-text-center">
				<svg xmlns="http://www.w3.org/2000/svg" width="28.652" height="22.931" viewBox="0 0 28.652 22.931"><g transform="translate(0.5 -5.5)"><path d="M26.045,10H1.607A1.609,1.609,0,0,0,0,11.607V28.417a1.609,1.609,0,0,0,1.607,1.607H26.045a1.609,1.609,0,0,0,1.607-1.607V11.607A1.609,1.609,0,0,0,26.045,10ZM26.7,28.417a.654.654,0,0,1-.653.653H1.607a.654.654,0,0,1-.653-.653V11.607a.654.654,0,0,1,.653-.653H26.045a.654.654,0,0,1,.653.653V28.417Z" transform="translate(0 -2.093)" fill="#c3c5c8" stroke="#c3c5c8" stroke-width="1"/><path d="M21.1,14a8.1,8.1,0,1,0,8.1,8.1A8.114,8.114,0,0,0,21.1,14Zm0,15.256A7.151,7.151,0,1,1,28.256,22.1,7.16,7.16,0,0,1,21.1,29.256Z" transform="translate(-6.802 -4.186)" fill="#c3c5c8" stroke="#c3c5c8" stroke-width="1"/><path d="M19.477,6.954h9.058a.477.477,0,0,0,0-.954H19.477a.477.477,0,1,0,0,.954Z" transform="translate(-9.942 0)" fill="#c3c5c8" stroke="#c3c5c8" stroke-width="1"/></g></svg>
				<p>Add Prescription Photos</p>
			</ion-card-content>
		</ion-card>
		
		<ion-grid *ngIf="edit_all_image.length!=0" class="ion-no-padding ion-margin-top ion-margin-bottom">
			<ion-row>
				<ion-col size="4" *ngFor="let img of edit_all_image; let i=index">
					<ion-card class="has_image">
						<ion-card-content>
							<img *ngIf="!isNetwork && !img.delete || img.globalURI==null && !img.delete" [src]="webview.convertFileSrc(img.localURI)">
							<img *ngIf="isNetwork && !img.delete && img.globalURI!=null" [src]="img.globalURI">
						</ion-card-content>
						<ion-button color="tertiary" (click)="removeImg(i,img,originalArray)">
							<ion-icon slot="icon-only" name="remove"></ion-icon>
						</ion-button>
					</ion-card>
				</ion-col>
				<ion-col size="4">
					<ion-card button (click)="addImg()">
						<ion-card-content class="ion-text-center">
							<svg xmlns="http://www.w3.org/2000/svg" width="28.652" height="22.931" viewBox="0 0 28.652 22.931"><g transform="translate(0.5 -5.5)"><path d="M26.045,10H1.607A1.609,1.609,0,0,0,0,11.607V28.417a1.609,1.609,0,0,0,1.607,1.607H26.045a1.609,1.609,0,0,0,1.607-1.607V11.607A1.609,1.609,0,0,0,26.045,10ZM26.7,28.417a.654.654,0,0,1-.653.653H1.607a.654.654,0,0,1-.653-.653V11.607a.654.654,0,0,1,.653-.653H26.045a.654.654,0,0,1,.653.653V28.417Z" transform="translate(0 -2.093)" fill="#c3c5c8" stroke="#c3c5c8" stroke-width="1"/><path d="M21.1,14a8.1,8.1,0,1,0,8.1,8.1A8.114,8.114,0,0,0,21.1,14Zm0,15.256A7.151,7.151,0,1,1,28.256,22.1,7.16,7.16,0,0,1,21.1,29.256Z" transform="translate(-6.802 -4.186)" fill="#c3c5c8" stroke="#c3c5c8" stroke-width="1"/><path d="M19.477,6.954h9.058a.477.477,0,0,0,0-.954H19.477a.477.477,0,1,0,0,.954Z" transform="translate(-9.942 0)" fill="#c3c5c8" stroke="#c3c5c8" stroke-width="1"/></g></svg>
							<p>Add More</p>
						</ion-card-content>
					</ion-card>
				</ion-col>
			</ion-row>
		</ion-grid>
		<ion-item>
			<ion-label position="floating">Doctor Name</ion-label>
			<ion-input type="text" formControlName="event_name" #bloodgroup></ion-input>
		</ion-item>
		<ion-item button>
			<ion-label position="floating">Prescription Date</ion-label>
			<ion-datetime displayFormat="DD MMM YYYY" [min]="year" [max]="todaydate" formControlName="event_datetime"></ion-datetime>
			<ion-button>
				<svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21"><path d="M18.539,1.641h-.984V0H15.914V1.641H5.086V0H3.445V1.641H2.461A2.464,2.464,0,0,0,0,4.1V18.539A2.464,2.464,0,0,0,2.461,21H18.539A2.464,2.464,0,0,0,21,18.539V4.1A2.464,2.464,0,0,0,18.539,1.641Zm.82,16.9a.821.821,0,0,1-.82.82H2.461a.821.821,0,0,1-.82-.82V7.711H19.359Zm0-12.469H1.641V4.1a.821.821,0,0,1,.82-.82h.984V4.922H5.086V3.281H15.914V4.922h1.641V3.281h.984a.821.821,0,0,1,.82.82Z" fill="#ea4e4e"/><g transform="translate(3.117 9.434)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(6.398 9.434)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(9.68 9.434)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(12.961 9.434)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(16.242 9.434)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(3.117 12.715)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(6.398 12.715)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(9.68 12.715)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(12.961 12.715)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(3.117 15.996)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(6.398 15.996)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(9.68 15.996)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(12.961 15.996)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g><g transform="translate(16.242 12.715)"><rect width="1.641" height="1.641" fill="#ea4e4e"/></g></svg>
			</ion-button>
		</ion-item>
		<ion-item>
			<ion-label position="floating">Description</ion-label>
			<ion-textarea formControlName="description"></ion-textarea>
		</ion-item>


		<div class="footer">
			<ion-button expand="block" (click)="close()" [disabled]="Progress">
				Cancel
			</ion-button>
			<button type="submit" class="btn_submit" [disabled]="Progress">
				Save
			</button>
		</div>
	</form>
</ion-content>
<ion-backdrop *ngIf="Progress"></ion-backdrop>